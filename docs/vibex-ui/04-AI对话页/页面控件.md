# AI 对话页 - 页面控件说明

## 1. 页面级说明

### 1.1 页面骨架结构

```
┌─────────────────────────────────────────────────────┐
│ Header (56px)                                       │
│ [←返回] [项目名称输入框] [保存] [生成]                │
├────────────────────────────────────┬────────────────┤
│ Chat Panel (flex: 1)              │ Sidebar       │
│                                    │ (280px)       │
│ ┌────────────────────────────────┐ │               │
│ │ 标题: 告诉 VibeX...            │ │ 项目信息      │
│ └────────────────────────────────┘ │ 对话配置      │
│                                    │ 历史记录      │
│ ┌────────────────────────────────┐ │               │
│ │ 对话消息列表                    │ │               │
│ │ [用户消息]                      │ │               │
│ │ [AI消息]                       │ │               │
│ └────────────────────────────────┘ │               │
│                                    │               │
│ ┌────────────────────────────────┐ │               │
│ │ 输入框 + 模型选择 + 发送        │ │               │
│ └────────────────────────────────┘ │               │
└────────────────────────────────────┴────────────────┘
```

### 1.2 布局参数

| 区域 | 宽度 | 说明 |
|------|------|------|
| Header | 100% | 固定 56px |
| Chat Panel | flex: 1, max-width: 800px | 居中显示 |
| Sidebar | 280px | 固定宽度 |

### 1.3 全局 CSS 样式

```css
.chat-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  max-width: 800px;
  margin: 0 auto;
}

.chat-messages {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.message {
  max-width: 80%;
  padding: 12px 16px;
  border-radius: 12px;
}

.message-user {
  align-self: flex-end;
  background: var(--primary);
  color: white;
}

.message-ai {
  align-self: flex-start;
  background: var(--bg-white);
  border: 1px solid var(--border);
}
```

---

## 2. 控件级说明

### 2.1 Header 组件

| 控件 | 类型 | 交互 | 数据 |
|------|------|------|------|
| 返回按钮 | icon-btn | click → 返回项目列表 | - |
| 项目名称 | input | blur → 自动保存 | project.name |
| 保存按钮 | button | click → 保存到本地 | - |
| 生成按钮 | button | click → 生成原型 | 主按钮 |

### 2.2 对话消息

| 控件 | 类型 | 交互 | 数据 |
|------|------|------|------|
| 用户消息 | 气泡 | 右对齐 | 用户输入 |
| AI消息 | 气泡 | 左对齐 | JSON 结构 |

**AI 消息内容**:
```json
{
  "理解确认": "我理解你想要...",
  "领域拆解": ["领域1", "领域2", ...],
  "建议提问": ["问题1", "问题2"]
}
```

### 2.3 输入区域

| 控件 | 类型 | 交互 | 数据 |
|------|------|------|------|
| 文本输入 | textarea | Enter 发送 | message.content |
| 模型选择 | select | change → 切换模型 | model: MiniMax/Claude/GPT |
| 发送按钮 | button | click → 发送消息 | - |

**快捷键**: Enter 发送, Shift+Enter 换行

### 2.4 侧边栏

| 控件 | 类型 | 交互 | 数据 |
|------|------|------|------|
| 项目信息 | 展示 | - | 名称/描述/目标用户 |
| 对话配置 | radio组 | click → 切换模式 | standard/detailed/simple |
| 历史记录 | 列表 | click → 加载历史 | timestamp |

---

## 3. 静态代码文件

| 文件 | 说明 |
|------|------|
| index.html | 完整页面 HTML + 内联 CSS |

---

## 4. 页面状态

| 状态 | 说明 |
|------|------|
| default | 等待输入 |
| loading | AI 处理中 (显示加载动画) |
| streaming | 流式输出中 |
| error | 请求失败 |

---

## 5. 数据流

```
用户输入 → API → AI响应 → 解析JSON → 渲染UI
              ↓
         领域拆解 → 存储 → 后续生成流程图
```
