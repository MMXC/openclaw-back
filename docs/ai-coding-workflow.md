# AI Agent 软件开发完整工作流

> 基于 OpenClaw 的 AI 驱动软件开发实践指南

---

## 一、典型 AI Coding Agent 工作流

### 1. 单 Agent 模式（适合小项目）

```
用户需求 → AI Agent → PRD → 设计 → 代码 → 测试
```

**工具组合**：
- **LLM**：Claude/GPT/MiniMax（理解需求、生成代码）
- **编程 IDE**：Cursor、Windsurf、VS Code + Continue
- **上下文**：项目代码、文档、git history

### 2. 多 Agent 模式（适合复杂项目）

```
┌─────────────────────────────────────────────┐
│           Project Manager Agent             │
│  (需求分析、任务拆分、进度协调)              │
└─────────────────┬───────────────────────────┘
                  │
    ┌───────────┼───────────┐
    ▼           ▼           ▼
┌───────┐  ┌───────┐  ┌───────┐
│Dev    │  │Dev    │  │Review│
│Agent  │  │Agent  │  │Agent │
│(前端) │  │(后端) │  │(审查)│
└───┬───┘  └───┬───┘  └───┬───┘
    │          │          │
    └──────────┼──────────┘
               ▼
        ┌──────────┐
        │ Codebase │
        └──────────┘
```

---

## 二、OpenClaw 分身工作流

### 架构设计

```
                    ┌──────────────┐
                    │   用户 (余祥)  │
                    └──────┬───────┘
                           │ 钉钉/终端
                           ▼
┌─────────────────────────────────────────────────────┐
│                  OpenClaw Gateway                    │
│                  (本地 Aliyun)                       │
├─────────────┬─────────────┬─────────────────────────┤
│   Agent 1   │   Agent 2   │      Agent N           │
│ (Main Brain)│ (Specialist)│   (Specialist)        │
│ - 理解需求   │ - 写 PRD    │ - 写代码              │
│ - 协调任务   │ - 领域设计   │ - 测试                │
│ - 结果汇总   │ - UI 设计   │ - 代码审查            │
└─────────────┴─────────────┴─────────────────────────┘
         │               │
    ┌────┴────┐    ┌────┴────┐
    │OC (搜索) │    │ 代码执行  │
    │(远端)    │    │ (本地)   │
    └─────────┘    └──────────┘
```

### 分身配置

| 分身 | 职责 | 技能 | 部署 |
|------|------|------|------|
| Main | 需求理解、任务分发 | vibeX-domain, vibeX-flow, vibeX-ui | 本地 |
| OC | 搜索、调研 | web_search, minimax | 阿里云 |
| 编码 | 代码生成 | cursor, composer | 本地 |

---

## 三、完整开发流程

### Step 1: 需求定义

```
用户输入: "我想做个直播系统"
    ↓
Main Agent 理解需求
    ↓
调用 vibeX-domain-decomposition
    ↓
输出结构化领域列表
```

### Step 2: 架构设计

```
领域列表
    ↓
调用 vibeX-flow-nodes
    ↓
生成完整流程节点
    ↓
用户确认/调整
```

### Step 3: UI 设计

```
流程节点
    ↓
调用 vibeX-ui-components
    ↓
生成 UI 组件树 + 规格
    ↓
用户确认
```

### Step 4: 代码生成

```
UI 规格 + 组件
    ↓
代码生成 Agent
    ↓
输出代码框架
    ↓
代码审查 Agent
    ↓
代码优化
```

### Step 5: 测试验证

```
代码
    ↓
测试 Agent
    ↓
单元测试
    ↓
集成测试
```

---

## 四、当前部署优化

### 现有组件

| 组件 | 地址 | 状态 |
|------|------|------|
| Main Gateway | 127.0.0.1:18789 | ✅ 运行中 |
| OC (搜索) | 47.101.164.106 | ✅ 已配置 |
| OD | 47.103.59.164 | 待恢复 |
| OE | 106.14.142.124 | 待恢复 |

### 建议工作流

```
用户 (钉钉)
    ↓
Main Gateway (本地)
    ├── 理解需求
    ├── 调用 VibeX Skills
    └── 结果汇总
    ↓
OC (远端服务器)
    ├── 搜索参考资料
    └── 调研最佳实践
    ↓
本地执行
    ├── 生成代码
    ├── Git 提交
    └── 部署
```

---

## 五、技能扩展建议

### 新增 Skills

| Skill | 功能 | 优先级 |
|-------|------|--------|
| vibeX-prd-generator | PRD 文档生成 | P1 |
| vibeX-code-generator | 代码框架生成 | P1 |
| vibeX-test-generator | 测试用例生成 | P2 |
| vibeX-api-design | API 接口设计 | P1 |

### 自动化流程

```yaml
# 自动化流程示例
trigger: 用户需求输入
actions:
  - skill: vibeX-domain-decomposition
  - skill: vibeX-flow-nodes  
  - skill: vibeX-ui-components
  - skill: vibeX-code-generator
  - action: git commit
```

---

## 六、最佳实践

### 1. 上下文管理
- 项目代码全量上传给 LLM
- 使用 git diff 只关注变更
- 维护详细的项目文档

### 2. 迭代开发
- MVP 优先：先跑通核心流程
- 增量开发：每次只做一个模块
- 及时反馈：用户确认后再继续

### 3. 质量保证
- 代码审查不可少
- 自动化测试集成
- 定期代码重构

### 4. 效率工具
- **Cursor**：代码生成主力
- **Windsurf**：多文件编辑
- **GitHub Copilot**：代码补全
- **MiniMax**：中文理解
